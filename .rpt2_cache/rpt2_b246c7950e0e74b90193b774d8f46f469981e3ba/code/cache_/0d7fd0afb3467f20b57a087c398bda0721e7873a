{"code":"import { __assign, __awaiter, __generator, __spreadArray } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\r\nimport { useEffect, useState } from \"react\";\r\nimport ReactTags from \"react-tag-autocomplete\";\r\nimport axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { removeAccents } from \"utils/removeAccents\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"components/Pricetags/Pricetags.scss\";\r\nvar _window = window.window;\r\nexport var PriceTags = function (props) {\r\n    var _a = useState(props.tags), tags = _a[0], setTags = _a[1];\r\n    var _b = useState(props.suggestions), suggestions = _b[0], setSuggestions = _b[1];\r\n    var _c = useState(tags.length | 0), setTotal = _c[1];\r\n    var _d = useState([]), defaultTags = _d[0], setDefaultTags = _d[1];\r\n    useEffect(function () {\r\n        var configDefaultTag = {\r\n            method: \"get\",\r\n            url: \"/price-tag/tag-display/list/default\",\r\n        };\r\n        var fetchData = function () { return __awaiter(void 0, void 0, void 0, function () {\r\n            var res, tagsTemp_1, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, axios(configDefaultTag)];\r\n                    case 1:\r\n                        res = _a.sent();\r\n                        tagsTemp_1 = __spreadArray([], defaultTags, true);\r\n                        res.data.data.forEach(function (item) {\r\n                            var temp = { id: \"\", name: item.displayContent };\r\n                            tagsTemp_1.push(temp);\r\n                        });\r\n                        setDefaultTags(tagsTemp_1);\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        error_1 = _a.sent();\r\n                        console.log(\"error\", error_1);\r\n                        return [3 /*break*/, 3];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        fetchData();\r\n    }, []);\r\n    useEffect(function () {\r\n        setTotal(tags.length);\r\n        props.onHandleChange(tags, props.categoryId);\r\n    }, []);\r\n    useEffect(function () {\r\n        setTotal(tags.length);\r\n        props.onHandleChange(tags, props.categoryId);\r\n    }, [tags, suggestions]);\r\n    useEffect(function () {\r\n        if (!_.isEmpty(props.suggestions)) {\r\n            setSuggestions(props.suggestions);\r\n        }\r\n    }, [props.suggestions]);\r\n    var onAddTag = function (tag) {\r\n        var tagIsTrim = __assign(__assign({}, tag), { name: tag.name.trim() });\r\n        if (tags.length >= 50) {\r\n            return;\r\n        }\r\n        if (!_.find(tags, tagIsTrim) && !_.isEmpty(tagIsTrim.name)) {\r\n            setTags(__spreadArray(__spreadArray([], tags, true), [tagIsTrim], false));\r\n            _.remove(suggestions, function (element) {\r\n                return element.name == tag.name;\r\n            });\r\n        }\r\n    };\r\n    var onDeleteTag = function (i) {\r\n        var tagsTmp = tags.slice(0);\r\n        console.log(\"i\", i);\r\n        if (_.isNumber(i) && i >= 0 && _.isNumber(tagsTmp[i].id)) {\r\n            setSuggestions(__spreadArray(__spreadArray([], suggestions, true), [tagsTmp[i]], false));\r\n        }\r\n        tagsTmp.splice(i, 1);\r\n        setTags(tagsTmp);\r\n    };\r\n    var inputAttributes = {\r\n        maxLength: 500,\r\n        disabled: !props.allowChange,\r\n    };\r\n    var tagComponent = function (props) {\r\n        return (_jsxs(\"button\", __assign({ disabled: true, className: \"tag-comment\" }, { children: [_jsx(\"span\", __assign({ className: \"tag-comment__title\" }, { children: props.tag.name }), void 0), _jsx(\"span\", __assign({ className: \"tag-comment__icon\", onClick: props.onDelete }, { children: _jsx(FontAwesomeIcon, { icon: faTimes }, void 0) }), void 0)] }), void 0));\r\n    };\r\n    var onHandChangeTextArea = function (e) {\r\n        console.log(\"e\", e.target.value);\r\n        var tags = [\r\n            {\r\n                id: \"\",\r\n                name: e.target.value,\r\n            },\r\n        ];\r\n        if (_.isEmpty(e.target.value)) {\r\n            tags = [];\r\n        }\r\n        setTags(tags);\r\n        props.onHandleChange(tags, props.categoryId);\r\n    };\r\n    var onHandleSuggestionsTransform = function (query, suggestions) {\r\n        var filteredSuggestions = _.filter(suggestions, function (item) {\r\n            return (removeAccents(item.name).toLowerCase().includes(query.toLowerCase()) ||\r\n                item.name.toLowerCase().includes(query.toLowerCase()));\r\n        });\r\n        return filteredSuggestions;\r\n    };\r\n    useEffect(function () {\r\n        $(\".react-tags__search-input\").on(\"keyup\", function (e) {\r\n            if ((e.which == 40 || e.which == 38) &&\r\n                _window.document.getElementById(\"ReactTags\") != undefined) {\r\n                _window.document.getElementById(\"ReactTags\").scrollTop = 0;\r\n                var offsetItem = _window.document.getElementsByClassName(\"is-active\")[0].offsetTop +\r\n                    _window.document.getElementsByClassName(\"is-active\")[0].offsetHeight;\r\n                _window.document.getElementById(\"ReactTags\").scrollTop =\r\n                    offsetItem - _window.document.getElementById(\"ReactTags\").offsetHeight;\r\n            }\r\n        });\r\n    }, []);\r\n    return (_jsx(_Fragment, { children: _jsxs(\"div\", __assign({ className: \"pricetag\" }, { children: [_jsx(\"div\", __assign({ className: \"pricetag__header\" }, { children: _jsxs(\"div\", { children: [\"Gi\\u00E1 \", props.requiredTextInput && _jsx(\"span\", __assign({ className: \"red\" }, { children: \"*\" }), void 0)] }, void 0) }), void 0), _jsx(\"div\", __assign({ className: \"pricetag__tags\" }, { children: props.dataTypeTextInput === \"Tag\" ? (_jsx(\"div\", __assign({ className: \"input-tags-comment\", id: props.id, style: { pointerEvents: props.allowChange ? \"auto\" : \"none\" } }, { children: _jsx(ReactTags, { addOnBlur: true, allowBackspace: true, allowNew: true, delimiters: [\"Enter\", \"Tab\", \".\"], onAddition: onAddTag, onDelete: onDeleteTag, inputAttributes: inputAttributes, minQueryLength: 1, \r\n                            // noSuggestionsText={props.noSuggestionsText}\r\n                            placeholderText: _.isEmpty(tags) ? props.placeholderText : \"\", suggestions: suggestions, tagComponent: tagComponent, tags: tags, maxSuggestionsLength: 100, suggestionsTransform: onHandleSuggestionsTransform }, void 0) }), void 0)) : (_jsx(\"textarea\", { className: \"text-area-comment\", placeholder: _.isEmpty(tags) ? props.placeholderText : \"\", id: props.id, rows: 4, onChange: function (e) { return onHandChangeTextArea(e); } }, void 0)) }), void 0), _jsx(\"div\", __assign({ className: \"pricetag__defaultTags\" }, { children: defaultTags.map(function (val) { return (_jsx(\"button\", __assign({ type: \"button\", className: tags.find(function (tag) { return tag.name === val.name; })\r\n                            ? \"pricetag__btn active\"\r\n                            : \"pricetag__btn\", onClick: function () { return onAddTag(val); } }, { children: val.name }), void 0)); }) }), void 0)] }), void 0) }, void 0));\r\n};\r\n//# sourceMappingURL=PriceTags.js.map","references":["/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/@types/react/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/@types/react-tag-autocomplete/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/axios/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/@types/lodash/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/@fortawesome/react-fontawesome/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/node_modules/@fortawesome/free-solid-svg-icons/index.d.ts","/Users/tuanbui/projects/client/propzy/clone_comment-category/src/utils/removeAccents.ts"],"map":"{\"version\":3,\"file\":\"PriceTags.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/components/Pricetags/PriceTags.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/tuanbui/projects/client/propzy/clone_comment-category/components/Pricetags/PriceTags.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"react\" />\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"components/Pricetags/Pricetags.scss\";\r\ninterface ITag {\r\n    id: string | number;\r\n    name: string;\r\n}\r\ninterface ISuggestion {\r\n    id: string | number;\r\n    name: string;\r\n}\r\ndeclare type PriceTagsProps = {\r\n    className?: string | null;\r\n    id: string;\r\n    allowChange: boolean;\r\n    placeholderText?: string;\r\n    showLimit: boolean;\r\n    tags: ITag[];\r\n    suggestions: ISuggestion[];\r\n    noSuggestionsText?: string;\r\n    categoryId: number;\r\n    requiredTextInput?: boolean;\r\n    dataTypeTextInput: string;\r\n    onHandleChange: (tags: ITag[], categoryId: number) => void;\r\n};\r\nexport declare const PriceTags: (props: PriceTagsProps) => JSX.Element;\r\nexport {};\r\n"}}
